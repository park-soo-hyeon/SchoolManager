<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë™ì–‘ë¯¸ë˜ëŒ€í•™êµ ì»´í“¨í„°ê³µí•™ë¶€ - AI ì±—ë´‡</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
    
    <style>
        /* --- 1. Reset & Global Styles --- */
        :root {
            --primary-blue: #005a9e; 
            --active-yellow: #dbe000;
            --bg-gray: #f5f5f5;
            --text-dark: #222222;
            --chat-bg: #eef2f6;
            --chat-bubble-user: #005a9e;
            --chat-bubble-bot: #ffffff;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Pretendard', sans-serif; -webkit-user-select: none; user-select: none; }
        body { background-color: var(--bg-gray); height: 100vh; display: flex; justify-content: center; align-items: center; overflow: hidden; }
        #app { width: 100%; height: 100%; max-width: 560px; background-color: var(--chat-bg); position: relative; display: flex; flex-direction: column; box-shadow: 0 0 30px rgba(0,0,0,0.2); }
        
        header { background-color: var(--primary-blue); color: #ffffff; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0; z-index: 10; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .logo-group { display: flex; align-items: center; gap: 10px; text-decoration: none; color: white; }
        .logo-group i { font-size: 24px; }
        .logo-group h1 { font-size: 16px; font-weight: 800; line-height: 1.2; }
        .logo-group span { font-size: 13px; font-weight: 400; opacity: 0.9; display: block; }
        .current-time { font-size: 13px; font-weight: 500; opacity: 0.9; text-align: right; line-height: 1.3; }

        #chat-container { flex: 1; display: flex; flex-direction: column; overflow: hidden; position: relative; }
        .chat-info-bar { background-color: rgba(255, 255, 255, 0.7); padding: 8px 15px; font-size: 12px; color: #555; text-align: center; backdrop-filter: blur(5px); border-bottom: 1px solid rgba(0,0,0,0.05); }
        .chat-messages { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; scroll-behavior: smooth; }
        .chat-messages::-webkit-scrollbar { display: none; }

        .message { max-width: 80%; padding: 12px 16px; border-radius: 16px; font-size: 15px; line-height: 1.5; position: relative; animation: fadeIn 0.3s ease; word-break: break-word; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .message.bot { align-self: flex-start; background-color: var(--chat-bubble-bot); border-top-left-radius: 2px; color: #333; box-shadow: 0 1px 2px rgba(0,0,0,0.1); margin-left: 5px; }
        .message.bot::before { content: '\f544'; font-family: "Font Awesome 6 Free"; font-weight: 900; position: absolute; top: -22px; left: 0; font-size: 14px; color: #666; }
        .message.bot::after { content: 'AI í•™ì‚¬'; position: absolute; top: -22px; left: 20px; font-family: 'Pretendard'; font-size: 12px; font-weight: bold; color: #555; }

        .message.user { align-self: flex-end; background-color: var(--chat-bubble-user); border-top-right-radius: 2px; color: white; box-shadow: 0 1px 2px rgba(0,0,0,0.1); }

        .chat-input-area { background-color: white; padding: 15px; display: flex; align-items: center; gap: 10px; border-top: 1px solid #e1e1e1; }
        .chat-input { flex: 1; padding: 12px 16px; border: 1px solid #ddd; border-radius: 24px; font-size: 15px; outline: none; background: #f8f9fa; }
        .chat-input:focus { border-color: var(--primary-blue); background: white; }
        .send-btn { width: 44px; height: 44px; border-radius: 50%; background-color: var(--primary-blue); color: white; border: none; display: flex; justify-content: center; align-items: center; cursor: pointer; font-size: 16px; }
        .send-btn:active { transform: scale(0.95); }
        .send-btn:disabled { background-color: #ccc; cursor: not-allowed; }

        .bottom-nav { background-color: var(--primary-blue); height: 90px; flex-shrink: 0; display: flex; justify-content: space-between; align-items: stretch; z-index: 50; }
        .nav-item { flex: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; text-decoration: none; border-right: 1px solid rgba(255,255,255,0.1); opacity: 0.7; transition: opacity 0.2s; min-width: 0; }
        .nav-item:last-child { border-right: none; }
        .nav-item.active { background-color: var(--active-yellow); color: #333; opacity: 1; }
        .nav-item.active .icon-box { border-color: #333; }
        .icon-box { font-size: 20px; margin-bottom: 5px; }
        .nav-text { font-size: 11px; font-weight: 500; text-align: center; white-space: nowrap; }
    </style>
</head>
<body>

    <div id="app">
        <header>
            <a href="index.html" class="logo-group">
                <i class="fa-solid fa-graduation-cap"></i>
                <div>
                    <h1>ë™ì–‘ë¯¸ë˜ëŒ€í•™êµ</h1>
                    <span>ì»´í“¨í„°ê³µí•™ë¶€</span>
                </div>
            </a>
            <div class="current-time" id="clock-display">Loading...</div>
        </header>

        <div id="chat-container">
            <div class="chat-info-bar">
                ê¶ê¸ˆí•œ í•™ê³¼ ì •ë³´ë¥¼ AIì—ê²Œ ë¬¼ì–´ë³´ì„¸ìš”!
            </div>
            <div class="chat-messages" id="chat-messages-container">
                <div class="message bot">
                    ì•ˆë…•í•˜ì„¸ìš”! ğŸ¤–<br>
                    <strong>ì»´í“¨í„°ê³µí•™ë¶€ AI ì±—ë´‡</strong>ì…ë‹ˆë‹¤.<br><br>
                    ì¤€ë¹„ëœ í•™êµ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ<br>
                    ì—¬ëŸ¬ë¶„ì˜ ì§ˆë¬¸ì— ë‹µë³€í•´ ë“œë¦´ê²Œìš”!
                </div>
            </div>
            <div class="chat-input-area">
                <input type="text" class="chat-input" id="chat-input" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." autocomplete="off">
                <button class="send-btn" id="send-btn" onclick="sendMessage()">
                    <i class="fa-solid fa-paper-plane"></i>
                </button>
            </div>
        </div>

        <nav class="bottom-nav">
            <a href="index.html" class="nav-item">
                <div class="icon-box"><i class="fa-solid fa-house"></i></div>
                <span class="nav-text">í™ˆ</span>
            </a>
            <a href="class.html" class="nav-item">
                <div class="icon-box"><i class="fa-regular fa-calendar-check"></i></div>
                <span class="nav-text">ê°•ì˜ì‹¤í˜„í™©</span>
            </a>
            <a href="notice.html" class="nav-item">
                <div class="icon-box"><i class="fa-solid fa-circle-exclamation"></i></div>
                <span class="nav-text">í•™ê³¼ë³„ê³µì§€</span>
            </a>
            <a href="album.html" class="nav-item">
                <div class="icon-box"><i class="fa-regular fa-images"></i></div>
                <span class="nav-text">í•™ë¶€ì•¨ë²”</span>
            </a>
            <a href="lost.html" class="nav-item">
                <div class="icon-box"><i class="fa-solid fa-box-open"></i></div>
                <span class="nav-text">ë¶„ì‹¤ë¬¼í™•ì¸</span>
            </a>
            <a href="chatbot.html" class="nav-item active">
                <div class="icon-box"><i class="fa-solid fa-comments"></i></div>
                <span class="nav-text">AI ì±—ë´‡</span>
            </a>
        </nav>
    </div>

    <script>
        const OPENAI_API_KEY = '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'; 
        
        // =========================================================================
        // [ìˆ˜ì •] data.json íŒŒì¼ì˜ ë‚´ìš©ì„ ì•„ë˜ ì¤‘ê´„í˜¸ {} ì•ˆì— ê·¸ëŒ€ë¡œ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.
        // fetchë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë³€ìˆ˜ì— ë°”ë¡œ ë‹´ì•„ì„œ CORS ì—ëŸ¬ë¥¼ í”¼í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.
        // =========================================================================
        const SCHOOL_DATA = { 
            // â–¼â–¼â–¼ ì—¬ê¸°ì— data.json ë‚´ìš©ì„ ë¶™ì—¬ë„£ìœ¼ì„¸ìš” â–¼â–¼â–¼
            
            // ì˜ˆì‹œ (ì§€ìš°ê³  ë¶™ì—¬ë„£ìœ¼ì„¸ìš”):
            
  "notices": [
    {
      "id": 1,
      "category": "í•™ë¶€",
      "title": "[í•™ë¶€] 2025-2í•™ê¸° ê°œì¸ ì‚¬ë¬¼í•¨ ì—´ì‡  ë°˜ë‚© ì•ˆë‚´",
      "date": "2025.12.10",
      "content": "2í•™ê¸° ê°œì¸ ì‚¬ë¬¼í•¨ì„ ì‚¬ìš©í•˜ì‹  í•™ìƒë“¤ì€ 12ì›” 20ì¼ê¹Œì§€ 3í˜¸ê´€ 208í˜¸ í•™ê³¼ì‚¬ë¬´ì‹¤ì— ì—´ì‡ ë¥¼ ë°˜ë‚©í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤. ë¯¸ë°˜ë‚© ì‹œ ë¶ˆì´ìµì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
    },
    {
      "id": 2,
      "category": "í•™ë¶€",
      "title": "[í•™ë¶€] ì»´í“¨í„°ê³µí•™ë¶€ ê·¼ë¡œì¥í•™ìƒ ëª¨ì§‘",
      "date": "2025.12.08",
      "content": "2025-2í•™ê¸° ì»´í“¨í„°ê³µí•™ë¶€ ê·¼ë¡œì¥í•™ìƒì„ ëª¨ì§‘í•©ë‹ˆë‹¤. ì‹ ì²­ ê¸°ê°„: 12ì›” 10ì¼ ~ 12ì›” 15ì¼ê¹Œì§€ 3í˜¸ê´€ 208í˜¸ì—ì„œ ì‹ ì²­ì„œë¥¼ ë°›ìœ¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤."
    },
    {
      "id": 3,
      "category": "ì»´ì†Œ",
      "title": "[ì»´ì†Œ] íœ´ë³´ê°• ì•ˆë‚´ - ìƒì„±í˜•AIí™œìš©ê°œë°œì‹¤ë¬´[3-YB]",
      "date": "2025.12.05",
      "content": "ìƒì„±í˜•AIí™œìš©ê°œë°œì‹¤ë¬´ ê³¼ëª©ì˜ 12ì›” 12ì¼ ìˆ˜ì—…ì€ íœ´ê°•ì…ë‹ˆë‹¤. ë³´ê°• ì¼ì •ì€ ì¶”í›„ ë³„ë„ ê³µì§€ ì˜ˆì •ì´ë‹ˆ í™•ì¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤."
    },
    {
      "id": 4,
      "category": "í–‰ì‚¬",
      "title": "ì»´í“¨í„°ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™ê³¼ ì¬í•™ìƒ í•œêµ­ì •ë³´ê¸°ìˆ í•™íšŒ ì¶”ê³„ì¢…í•©í•™ìˆ ëŒ€íšŒ ì°¸ê°€",
      "date": "2025.12.10",
      "content": "ì»´í“¨í„°ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™ê³¼ ì¬í•™ìƒì´ 2025ë…„ í•œêµ­ì •ë³´ê¸°ìˆ í•™íšŒ ì¶”ê³„ì¢…í•©í•™ìˆ ëŒ€íšŒ ëŒ€í•™ìƒ ë…¼ë¬¸ê²½ì§„ëŒ€íšŒì— ì°¸ê°€í•˜ì˜€ìŠµë‹ˆë‹¤."
    },
    {
      "id": 5,
      "category": "ìˆ˜ìƒ",
      "title": "ì»´í“¨í„°ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™ê³¼ í•œì´ìŒ ë“œë¦¼ì—… ê³µëª¨ì „ ì¥ë ¤ìƒ ìˆ˜ìƒ",
      "date": "2025.11.21",
      "content": "ì»´í“¨í„°ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™ê³¼ ì¬í•™ìƒì´ í•œì´ìŒ ë“œë¦¼ì—…(ICTë©˜í† ë§) ê³µëª¨ì „ ì°½ì˜ë„ì „í˜• ë¶€ë¬¸ì—ì„œ ì¥ë ¤ìƒì„ ìˆ˜ìƒí•˜ì˜€ìŠµë‹ˆë‹¤."
    },
    {
      "id": 6,
      "category": "í–‰ì‚¬",
      "title": "[í•™ë¶€] 2025 ë™ì–‘ë¯¸ë˜EXPO ì¡¸ì—…ì‘í’ˆì „ì‹œíšŒ ì•ˆë‚´",
      "date": "2025.10.21",
      "content": "2025 ë™ì–‘ë¯¸ë˜EXPO (ì œ43íšŒ ì¡¸ì—…ì‘í’ˆì „ì‹œíšŒ)ê°€ 10ì›” 21ì¼(í™”)ë¶€í„° 24ì¼(ê¸ˆ)ê¹Œì§€ ì§„í–‰ë©ë‹ˆë‹¤. ë§ì€ ê´€ëŒ ë¶€íƒë“œë¦½ë‹ˆë‹¤."
    },
    {
      "id": 7,
      "category": "í•™ì‚¬",
      "title": "[í•™ë¶€] 2025-2í•™ê¸° ê¸°ë§ê³ ì‚¬ ì¼ì • ì•ˆë‚´",
      "date": "2025.11.28",
      "content": "2025-2í•™ê¸° ê¸°ë§ê³ ì‚¬ ì¼ì •ì´ í™•ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ê¸°ê°„: 12ì›” 16ì¼(ì›”) ~ 12ì›” 20ì¼(ê¸ˆ). ì‹œí—˜ ì‹œê°„í‘œëŠ” í¬í„¸ì—ì„œ í™•ì¸í•˜ì„¸ìš”."
    },
    {
      "id": 8,
      "category": "í•™ë¶€",
      "title": "[í•™ë¶€] 2026-1í•™ê¸° ìˆ˜ê°•ì‹ ì²­ ì•ˆë‚´",
      "date": "2025.11.15",
      "content": "2026-1í•™ê¸° ìˆ˜ê°•ì‹ ì²­ ì¼ì •ì„ ì•ˆë‚´í•©ë‹ˆë‹¤. ìˆ˜ê°•ì‹ ì²­ ê¸°ê°„: 2025ë…„ 12ì›” 2ì¼ ~ 12ì›” 6ì¼. ìˆ˜ê°•ì‹ ì²­ ë°©ë²•ì€ í•™êµ í¬í„¸ì„ ì°¸ê³ í•˜ì„¸ìš”."
    },
    {
      "id": 9,
      "category": "ì¥í•™",
      "title": "[í•™ë¶€] 2025-2í•™ê¸° ì„±ì ìš°ìˆ˜ ì¥í•™ê¸ˆ ì‹ ì²­ ì•ˆë‚´",
      "date": "2025.10.30",
      "content": "2025-2í•™ê¸° ì„±ì ìš°ìˆ˜ ì¥í•™ê¸ˆì„ ì‹ ì²­ë°›ìŠµë‹ˆë‹¤. ì‹ ì²­ ê¸°ê°„: 11ì›” 1ì¼ ~ 11ì›” 10ì¼. ìì„¸í•œ ì‚¬í•­ì€ í•™ê³¼ ì‚¬ë¬´ì‹¤ë¡œ ë¬¸ì˜í•˜ì„¸ìš”."
    },
    {
      "id": 10,
      "category": "í•™ì‚¬",
      "title": "[í•™ë¶€] 2025-2í•™ê¸° ì¤‘ê°„ê³ ì‚¬ ì„±ì  í™•ì¸ ë° ì´ì˜ì‹ ì²­ ì•ˆë‚´",
      "date": "2025.10.25",
      "content": "ì¤‘ê°„ê³ ì‚¬ ì„±ì ì´ ê³µê°œë˜ì—ˆìŠµë‹ˆë‹¤. ì„±ì  ì´ì˜ì‹ ì²­ ê¸°ê°„: 10ì›” 25ì¼ ~ 10ì›” 29ì¼ê¹Œì§€ í¬í„¸ ì‹œìŠ¤í…œì„ í†µí•´ ì‹ ì²­ ê°€ëŠ¥í•©ë‹ˆë‹¤."
    }
  ],
  
  "classrooms": [
    {
      "building": "3í˜¸ê´€",
      "floor": 2,
      "rooms": [
        {
          "number": "208",
          "name": "í•™ê³¼ì‚¬ë¬´ì‹¤",
          "type": "office",
          "description": "ì»´í“¨í„°ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™ê³¼ í•™ê³¼ì‚¬ë¬´ì‹¤"
        },
        {
          "number": "301",
          "name": "PCì‹¤ìŠµì‹¤1",
          "type": "lab",
          "capacity": 40,
          "facilities": ["PC", "í”„ë¡œì í„°", "ì—ì–´ì»¨"]
        },
        {
          "number": "302",
          "name": "PCì‹¤ìŠµì‹¤2",
          "type": "lab",
          "capacity": 40,
          "facilities": ["PC", "í”„ë¡œì í„°", "ì—ì–´ì»¨"]
        },
        {
          "number": "401",
          "name": "ì „ê³µê°•ì˜ì‹¤1",
          "type": "lecture",
          "capacity": 50,
          "facilities": ["í”„ë¡œì í„°", "í™”ì´íŠ¸ë³´ë“œ", "ì—ì–´ì»¨"]
        },
        {
          "number": "402",
          "name": "ì „ê³µê°•ì˜ì‹¤2",
          "type": "lecture",
          "capacity": 50,
          "facilities": ["í”„ë¡œì í„°", "í™”ì´íŠ¸ë³´ë“œ", "ì—ì–´ì»¨"]
        }
      ]
    },
    {
      "building": "4í˜¸ê´€",
      "floor": 3,
      "rooms": [
        {
          "number": "301",
          "name": "ì†Œí”„íŠ¸ì›¨ì–´ê°œë°œì‹¤ìŠµì‹¤",
          "type": "lab",
          "capacity": 45,
          "facilities": ["ê³ ì‚¬ì–‘PC", "ë“€ì–¼ëª¨ë‹ˆí„°", "í”„ë¡œì í„°"]
        }
      ]
    }
  ],
  
  "lost_items": [
    {
      "id": 1,
      "item": "ë…¸íŠ¸ë¶",
      "brand": "LGê·¸ë¨",
      "location": "3í˜¸ê´€ 301í˜¸",
      "date": "2025.12.10",
      "description": "15ì¸ì¹˜ ì€ìƒ‰ LGê·¸ë¨ ë…¸íŠ¸ë¶",
      "status": "ë³´ê´€ì¤‘",
      "contact": "3í˜¸ê´€ 208í˜¸ í•™ê³¼ì‚¬ë¬´ì‹¤"
    },
    {
      "id": 2,
      "item": "ì—ì–´íŒŸ",
      "brand": "Apple",
      "location": "3í˜¸ê´€ 302í˜¸",
      "date": "2025.12.08",
      "description": "í°ìƒ‰ ì—ì–´íŒŸ í”„ë¡œ 2ì„¸ëŒ€",
      "status": "ë³´ê´€ì¤‘",
      "contact": "3í˜¸ê´€ 208í˜¸ í•™ê³¼ì‚¬ë¬´ì‹¤"
    },
    {
      "id": 3,
      "item": "USB",
      "brand": "ì‚¼ì„±",
      "location": "4í˜¸ê´€ 301í˜¸",
      "date": "2025.12.05",
      "description": "32GB ê²€ì •ìƒ‰ USB ë©”ëª¨ë¦¬",
      "status": "ë³´ê´€ì¤‘",
      "contact": "3í˜¸ê´€ 208í˜¸ í•™ê³¼ì‚¬ë¬´ì‹¤"
    },
    {
      "id": 4,
      "item": "êµì¬",
      "brand": "-",
      "location": "3í˜¸ê´€ 401í˜¸",
      "date": "2025.12.03",
      "description": "ìë£Œêµ¬ì¡° êµì¬ (ì´ë¦„: ê¹€ì² ìˆ˜ ê¸°ì¬)",
      "status": "ì°¾ì•„ê°",
      "contact": "-"
    },
    {
      "id": 5,
      "item": "ë§ˆìš°ìŠ¤",
      "brand": "ë¡œì§€í…",
      "location": "3í˜¸ê´€ 301í˜¸",
      "date": "2025.11.28",
      "description": "ë¡œì§€í… ë¬´ì„  ë§ˆìš°ìŠ¤ (íŒŒë€ìƒ‰)",
      "status": "ë³´ê´€ì¤‘",
      "contact": "3í˜¸ê´€ 208í˜¸ í•™ê³¼ì‚¬ë¬´ì‹¤"
    }
  ],
  
  "faq": [
    {
      "category": "ê³µì§€ì‚¬í•­",
      "question": "ê³µì§€ì‚¬í•­ì€ ì–´ë””ì„œ í™•ì¸í•˜ë‚˜ìš”?",
      "answer": "í•™ê³¼ í™ˆí˜ì´ì§€(www.dongyang.ac.kr/dmu/4580/subview.do) ë˜ëŠ” 3í˜¸ê´€ 208í˜¸ ê²Œì‹œíŒì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."
    },
    {
      "category": "ê³µì§€ì‚¬í•­",
      "question": "ìµœê·¼ ê³µì§€ì‚¬í•­ì€ ë¬´ì—‡ì¸ê°€ìš”?",
      "answer": "ê°€ì¥ ìµœê·¼ ê³µì§€ëŠ” '2025-2í•™ê¸° ê°œì¸ ì‚¬ë¬¼í•¨ ì—´ì‡  ë°˜ë‚© ì•ˆë‚´'ì…ë‹ˆë‹¤. 12ì›” 20ì¼ê¹Œì§€ ë°˜ë‚©í•´ì£¼ì„¸ìš”."
    },
    {
      "category": "ê°•ì˜ì‹¤",
      "question": "í•™ê³¼ ê°•ì˜ì‹¤ì€ ì–´ë””ì— ìˆë‚˜ìš”?",
      "answer": "ì£¼ë¡œ 3í˜¸ê´€ 3ì¸µ(301, 302), 4ì¸µ(401, 402)ê³¼ 4í˜¸ê´€ 3ì¸µ(301)ì— ìˆìŠµë‹ˆë‹¤."
    },
    {
      "category": "ê°•ì˜ì‹¤",
      "question": "PCì‹¤ìŠµì‹¤ì€ ì–´ë””ì— ìˆë‚˜ìš”?",
      "answer": "3í˜¸ê´€ 301í˜¸ì™€ 302í˜¸ì— PCì‹¤ìŠµì‹¤ì´ ìˆìœ¼ë©°, ê° 40ëª… ìˆ˜ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤."
    },
    {
      "category": "ê°•ì˜ì‹¤",
      "question": "í•™ê³¼ì‚¬ë¬´ì‹¤ì€ ì–´ë””ì¸ê°€ìš”?",
      "answer": "3í˜¸ê´€ 208í˜¸ì…ë‹ˆë‹¤. ì „í™”ë²ˆí˜¸ëŠ” 02-2610-1843ì…ë‹ˆë‹¤."
    },
    {
      "category": "ë¶„ì‹¤ë¬¼",
      "question": "ë¶„ì‹¤ë¬¼ì„ ì°¾ì•˜ëŠ”ë° ì–´ë–»ê²Œ í•˜ë‚˜ìš”?",
      "answer": "3í˜¸ê´€ 208í˜¸ í•™ê³¼ì‚¬ë¬´ì‹¤ì— ê°€ì ¸ë‹¤ ì£¼ì‹œë©´ ë©ë‹ˆë‹¤."
    },
    {
      "category": "ë¶„ì‹¤ë¬¼",
      "question": "ë¬¼ê±´ì„ ìƒì–´ë²„ë ¸ëŠ”ë° ì–´ë””ì„œ ì°¾ë‚˜ìš”?",
      "answer": "3í˜¸ê´€ 208í˜¸ í•™ê³¼ì‚¬ë¬´ì‹¤ì— ë¬¸ì˜í•˜ì‹œê±°ë‚˜, í•™ê³¼ ê²Œì‹œíŒì˜ ë¶„ì‹¤ë¬¼ ëª©ë¡ì„ í™•ì¸í•´ì£¼ì„¸ìš”."
    },
    {
      "category": "ë¶„ì‹¤ë¬¼",
      "question": "ë¶„ì‹¤ë¬¼ ë³´ê´€ ê¸°ê°„ì€ ì–¼ë§ˆë‚˜ ë˜ë‚˜ìš”?",
      "answer": "ë¶„ì‹¤ë¬¼ì€ ìŠµë“ì¼ë¡œë¶€í„° 1ê°œì›”ê°„ ë³´ê´€ë˜ë©°, ì´í›„ ì²˜ë¦¬ë©ë‹ˆë‹¤."
    }
  ]


            
            // â–²â–²â–² ì—¬ê¸°ê¹Œì§€ â–²â–²â–²
        };

        let SCHOOL_DATA_CONTEXT = JSON.stringify(SCHOOL_DATA, null, 2);

        // --- ì‹œê³„ ë¡œì§ ---
        function updateClock() {
            const now = new Date();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const date = String(now.getDate()).padStart(2, '0');
            const days = ['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '];
            const dayName = days[now.getDay()];
            
            let h = now.getHours();
            const ampm = h >= 12 ? 'PM' : 'AM';
            h = h % 12; h = h ? h : 12;
            const m = String(now.getMinutes()).padStart(2, '0');

            document.getElementById('clock-display').innerHTML = `${month}.${date}(${dayName})<br>${h}:${m} ${ampm}`;
        }

        // --- ì±—ë´‡ ë©”ì¸ ë¡œì§ ---
        async function sendMessage() {
            const inputEl = document.getElementById('chat-input');
            const sendBtn = document.getElementById('send-btn');
            const msg = inputEl.value.trim();
            if (!msg) return;

            addMessage(msg, 'user');
            inputEl.value = '';
            
            inputEl.disabled = true;
            sendBtn.disabled = true;
            const loadingMsgDiv = addMessage('ë‹µë³€ì„ ìƒì„±ì¤‘ì…ë‹ˆë‹¤... ğŸ’­', 'bot');

            try {
                const reply = await callOpenAI(msg);
                loadingMsgDiv.innerHTML = reply.replace(/\n/g, '<br>');
            } catch (error) {
                loadingMsgDiv.innerHTML = "ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
                console.error("API Error:", error);
            } finally {
                inputEl.disabled = false;
                sendBtn.disabled = false;
                inputEl.focus();
                
                const container = document.getElementById('chat-messages-container');
                container.scrollTop = container.scrollHeight;
            }
        }

        function addMessage(text, type) {
            const container = document.getElementById('chat-messages-container');
            const msgDiv = document.createElement('div');
            msgDiv.className = `message ${type}`;
            msgDiv.innerHTML = text;
            container.appendChild(msgDiv);
            container.scrollTop = container.scrollHeight;
            return msgDiv;
        }

        async function callOpenAI(userText) {
            const systemPrompt = `
                ë‹¹ì‹ ì€ ë™ì–‘ë¯¸ë˜ëŒ€í•™êµ ì»´í“¨í„°ê³µí•™ë¶€ AI í•™ì‚¬ ë„ìš°ë¯¸ì…ë‹ˆë‹¤.
                ì•„ë˜ì— ì œê³µëœ [í•™êµ ì •ë³´ ë°ì´í„°]ë¥¼ ìµœìš°ì„ ìœ¼ë¡œ ì°¸ê³ í•˜ì—¬ ë‹µë³€í•˜ì„¸ìš”.
                
                [í•™êµ ì •ë³´ ë°ì´í„°]:
                ${SCHOOL_DATA_CONTEXT}
            `;

            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${OPENAI_API_KEY}`
                },
                body: JSON.stringify({
                    model: "gpt-4o-mini",
                    messages: [
                        { role: "system", content: systemPrompt },
                        { role: "user", content: userText }
                    ],
                    temperature: 0.5
                })
            });

            if (!response.ok) {
                const errData = await response.json();
                throw new Error(errData.error?.message || 'Network response');
            }

            const data = await response.json();
            return data.choices[0].message.content;
        }

        document.getElementById('chat-input').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') sendMessage();
        });

        setInterval(updateClock, 1000);
        updateClock();
    </script>
</body>
</html>